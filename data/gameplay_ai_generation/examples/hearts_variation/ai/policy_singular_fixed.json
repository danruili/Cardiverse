{
    "game_description": "# Hearts of Time Game System Ruleset (Refined)\n\n### 1. **Game State**\n\n#### **Common Information:**\n- **Trick History:** Sequence of played cards in each trick, visible to all players.\n- **Current Leader:** Player who won the last trick, visible to all players.\n- **Turn Information:** Current player and actions taken during the turn.\n- **Player Order:** Logical order of play, visible to all players.\n\n#### **Player-Specific Information:**\n- **Public**:\n  - **Scores:** Current interference (disturbance scores) known at all times.\n  - **Trick Wins:** Number of tricks each player has won.\n- **Private**:\n  - **Player Hand:** Cards held by the player.\n  - **Temporal Suit Shift Status:** Whether the player has used their shift ability.\n\n---\n\n### 2. **Card**\n\n#### **Attributes:**\n- **Rank:** From 2 to Ace.\n- **Suit:** One of {Hearts, Diamonds, Clubs, Spades}.\n- **Special Cards:**\n  - **Queen of Spades:** 13 points of disturbance.\n  - **Hearts:** Each incurs 1 point of disturbance.\n\n---\n\n### 3. **Deck and Initial Dealing**\n\n#### **Deck Composition:**\n- A standard 52-card deck divided into four suits.\n\n#### **Initial Dealing:**\n- **4 Players:** Each player receives 13 cards.\n- Other player counts require deck adjustment by removing low-ranking cards, maintaining suit balance.\n\n---\n\n### 4. **Legal Action Space**\n\n#### **On a Turn, a Player May:**\n1. **Lead a Trick:**\n   - Play any card from their hand.\n   - Pre-requisite: Must follow suit, unless void in that suit.\n2. **Follow a Trick:**\n   - Play a card matching the led suit, if possible.\n   - Else, play any card.\n3. **Declare Temporal Suit Shift:**\n   - Announce the shift of rule for a trick to establish a temporary trump suit. This can be declared before playing any card during a player's turn.\n   - Pre-requisite: Can only be used once per game per player.\n\n---\n\n### 5. **Round**\n\n#### **Sequence of Play:**\n1. The player with the 2 of Clubs starts the first trick.\n2. Players take turns in clockwise order, leading with the suit following rules.\n3. Each trick consists of:\n   - Playing cards in the order of player turns.\n   - Using Temporal Suit Shift if strategically advantageous. When declared, the player's chosen suit acts as trump for that entire trick.\n4. The winner of a trick leads the next trick.\n5. Play continues until all cards have been played.\n\n#### **Winning Conditions:**\n- Game ends when a player reaches a preset disturbance threshold (commonly 100 points).\n- Player with the lowest disturbance score wins.\n\n---\n\n### 6. **Other Game Mechanics & Rules**\n\n- **No Hearts or Queen of Spades First Trick:** During the first trick, players must avoid playing hearts or the Queen of Spades unless they have no alternative.\n- **Shooting the Moon:** Capturing all Hearts and Queen of Spades reduces disturbance to zero for that round, increasing opponents' scores by 26 points.\n- **Temporal Strategy:** Deciding when to use Temporal Suit Shift is critical to altering trick outcomes. The temporary trump suit impacts only one trick and reverts after its resolution.\n\n---\n\n### 7. **Player Observation Information**\n\n#### **Visible Information to Each Player:**\n- Cards in their own hand.\n- Cards played in tricks.\n- Scores of each player.\n- Temporal Suit Shift use and declared trump suit.\n\n#### **Hidden Information:**\n- Cards in opponents\u2019 hands.\n\n---\n\n### 8. **Payoffs**\n\n##### **Endgame Scoring:**\n- A point of disturbance equals 1 for each Heart.\n- Queen of Spades is worth 13 disturbance points.\n- Shooting the Moon results in zero points for the round, with opponents' scores increased.\n\n##### **Winning Player\u2019s Reward:**\n- Having the lowest disturbance score leads to victory when the game concludes.\n\nWith these refinements, the \"Hearts of Time\" game provides clarity on the use and impact of Temporal Suit Shift, maintaining the intrigue and strategy native to Hearts, while clearly outlining the new rules. Enjoy your journey through the mystical realm as you guide your temporal path among the \"Hearts of Time.\"",
    "input_description": "Example: \n{\"common\": {\"num_players\": 4, \"current_player\": 1, \"current_leader\": null, \"is_over\": false, \"trick_history\": [], \"current_trick\": [{\"player\": 3, \"card\": {\"rank\": \"4\", \"suit\": \"clubs\"}}, {\"player\": 0, \"card\": {\"rank\": \"6\", \"suit\": \"clubs\"}}], \"temporary_trump\": \"hearts\", \"won_tricks\": {\"0\": 0, \"1\": 0, \"2\": 0, \"3\": 0}, \"disturbance_scores\": {\"0\": 0, \"1\": 0, \"2\": 0, \"3\": 0}, \"temporal_shift_status\": {\"0\": true, \"1\": true, \"2\": true, \"3\": true}, \"facedown_cards\": {\"deck_size\": 0}}, \"players\": [{\"public\": {\"scores\": 0, \"trick_wins\": 0}}, {\"public\": {\"scores\": 0, \"trick_wins\": 0, \"current_player\": true}, \"private\": {\"hand\": [{\"rank\": \"5\", \"suit\": \"diamonds\"}, {\"rank\": \"3\", \"suit\": \"clubs\"}, {\"rank\": \"10\", \"suit\": \"spades\"}, {\"rank\": \"9\", \"suit\": \"clubs\"}, {\"rank\": \"2\", \"suit\": \"spades\"}, {\"rank\": \"4\", \"suit\": \"hearts\"}, {\"rank\": \"3\", \"suit\": \"diamonds\"}, {\"rank\": \"5\", \"suit\": \"clubs\"}, {\"rank\": \"2\", \"suit\": \"diamonds\"}, {\"rank\": \"2\", \"suit\": \"hearts\"}, {\"rank\": \"6\", \"suit\": \"spades\"}, {\"rank\": \"5\", \"suit\": \"hearts\"}, {\"rank\": \"3\", \"suit\": \"spades\"}], \"temporal_shift_used\": true}}, {\"public\": {\"scores\": 0, \"trick_wins\": 0}}, {\"public\": {\"scores\": 0, \"trick_wins\": 0}}], \"recent_history\": [{\"type\": \"action\", \"player_id\": 1, \"action\": {\"action\": \"declare_shift\", \"args\": {\"suit\": \"hearts\"}, \"id\": 0}, \"msg\": \"Player 1 decides to: declare_shift-(suit: hearts)\"}, {\"type\": \"info\", \"msg\": \"Player 1 declared a temporal suit shift to hearts.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 2.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 1, \"msg\": \"---------- End of Player 1's turn ----------\"}, {\"type\": \"action\", \"player_id\": 2, \"action\": {\"action\": \"declare_shift\", \"args\": {\"suit\": \"clubs\"}, \"id\": 2}, \"msg\": \"Player 2 decides to: declare_shift-(suit: clubs)\"}, {\"type\": \"info\", \"msg\": \"Player 2 declared a temporal suit shift to clubs.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 3.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 2, \"msg\": \"---------- End of Player 2's turn ----------\"}, {\"type\": \"action\", \"player_id\": 3, \"action\": {\"action\": \"declare_shift\", \"args\": {\"suit\": \"hearts\"}, \"id\": 0}, \"msg\": \"Player 3 decides to: declare_shift-(suit: hearts)\"}, {\"type\": \"info\", \"msg\": \"Player 3 declared a temporal suit shift to hearts.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 0.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 3, \"msg\": \"---------- End of Player 3's turn ----------\"}, {\"type\": \"action\", \"player_id\": 0, \"action\": {\"action\": \"play_card\", \"args\": {\"suit\": \"clubs\", \"rank\": \"6\"}, \"id\": 4}, \"msg\": \"Player 0 decides to: play_card-(suit: clubs, rank: 6)\"}, {\"type\": \"info\", \"msg\": \"Player 0 played 6-clubs.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 1.\", \"role\": null}], \"legal_actions\": [{\"action\": \"play_card\", \"args\": {\"suit\": \"clubs\", \"rank\": \"3\"}, \"id\": 0}, {\"action\": \"play_card\", \"args\": {\"suit\": \"clubs\", \"rank\": \"9\"}, \"id\": 1}, {\"action\": \"play_card\", \"args\": {\"suit\": \"clubs\", \"rank\": \"5\"}, \"id\": 2}]}\n\nExplanation: \n{\"common\": \"A dictionary containing shared information about the game, accessible to all players.\", \"common.num_players\": \"The total number of players participating in the game, which is 4 in this case.\", \"common.current_player\": \"The ID of the player who is currently taking their turn, set to Player 1.\", \"common.current_leader\": \"The ID of the player who led the current trick or will lead the next trick, initially null.\", \"common.is_over\": \"A boolean indicating whether the game has ended, currently set to false.\", \"common.trick_history\": \"A list tracking the history of completed tricks, initially empty in this state.\", \"common.current_trick\": \"A list representing the cards currently played in this trick with player IDs and their corresponding cards.\", \"common.temporary_trump\": \"The suit declared as the temporary trump for the current trick, set to 'hearts'.\", \"common.won_tricks\": \"A dictionary counting the number of tricks won by each player, all set to 0 initially.\", \"common.disturbance_scores\": \"A dictionary tracking the disturbance scores for each player, all starting at 0.\", \"common.temporal_shift_status\": \"A dictionary indicating whether each player has used their ability to declare a temporary trump, all marked as true.\", \"common.facedown_cards\": \"A dictionary containing the remaining cards in the deck, currently showing a deck size of 0.\", \"players\": \"A list of dictionaries where each entry contains information specific to an individual player, including both public and private fields.\", \"players[].public\": \"Publicly visible information for a player, including scores and trick wins.\", \"players[].private\": \"Information only visible to the individual player, including their hand and the temporal shift usage status.\", \"recent_history\": \"A list recording recent actions taken during the game, each entry indicates who performed an action, what action it was, and any remarks.\", \"legal_actions\": \"A list of dictionaries representing the actions the current player can legally perform, each with an 'action' type and potential 'args'.\"}",
    "policy_list": [
        "**Optimal Temporal Shift Use**\nThis strategy aims to maximize the strategic advantage gained from the Temporal Suit Shift ability by using it at a critical moment when winning the current trick can either prevent receiving disturbance points or enable the AI to 'shoot the moon'."
    ],
    "code": [
        "\ndef score(state: dict, action: dict) -> float:\n    # Extract relevant parts of the game state\n    current_player_id = state[\"common\"][\"current_player\"]\n    scores = state[\"common\"][\"disturbance_scores\"]\n    # Fix the player hand access to be correct based on the player's index\n    player_hand = state[\"players\"][current_player_id][\"private\"][\"hand\"]\n    # Correcting the temporal shift used logic by checking if it's already used\n    temporal_shift_used = state[\"common\"][\"temporal_shift_status\"][current_player_id]\n    temp_trump_suit = state[\"common\"][\"temporary_trump\"]\n    legal_actions = state[\"legal_actions\"]\n\n    # Calculate current disturbance score percentage\n    max_disturbance_threshold = 100  # Change this if the game uses a different threshold\n    current_score = scores.get(current_player_id, 0)\n    current_score_ratio = current_score / max_disturbance_threshold\n\n    # Calculate the potential benefit of the action\n    action_benefit = 0.0\n    if action['action'] == 'declare_shift' and not temporal_shift_used:\n        # Benefit of declaring a temporary suit shift as a strategic action\n        action_benefit += 0.1  # This adds a small amount as using temporal shift can impact winning tricks\n\n    if action['action'] == 'play_card':\n        card_to_play = action['args']\n        # Evaluate if playing the card helps avoid gaining disturbance points\n        is_queen_of_spades = (card_to_play['suit'] == 'spades' and card_to_play['rank'] == 'queen')\n        is_heart_card = (card_to_play['suit'] == 'hearts')\n        \n        if is_queen_of_spades:\n            action_benefit -= 0.5  # High negative impact as gaining 13 points is detrimental\n        elif is_heart_card:\n            action_benefit -= 0.1  # Small negative impact as each heart gives 1 disturbance point\n\n        # Evaluate whether the player could lead the trick\n        leading_suit = state[\"common\"][\"current_trick\"][0][\"card\"][\"suit\"] if state[\"common\"][\"current_trick\"] else None\n        if leading_suit:\n            if card_to_play['suit'] == leading_suit:\n                action_benefit += 0.1  # Positive if following suit and potentially winning the trick\n\n    # Potential 'shoot the moon' benefit\n    if all(card['suit'] == 'hearts' or (card['suit'] == 'spades' and card['rank'] == 'queen') for card in player_hand):\n        action_benefit += 0.3  # Moderate boost if likely to 'shoot the moon'\n\n    # Calculate final normalized score\n    result_score = max(0.0, min(1.0, 1.0 - current_score_ratio + action_benefit))\n\n    return result_score\n"
    ]
}