{
    "game_description": "Go Fish is a fun game that will amuse and entertain even the youngest card players. It is similar to the game Authors.\n\n### The Pack\n\nThe standard 52-card pack is used. Some cards will be dealt and the rest will form the stock pile.\n\nShop our Hoyle 6 in 1 Fun Pack\n\n### Object of the Game\n\nThe goal is to win the most \"books\" of cards. A book is any four of a kind, such as four kings, four aces, and so on.\n\n### Rank of Cards\n\nThe cards rank from ace (high) to two (low). The suits are not important, only the card numbers are relevant, such as two 3s, two 10s, and so on.\n\n### The Deal\n\nAny player deals one card face up to each player. The player with the lowest card is the dealer. The dealer shuffles the cards, and the player to the right cuts them.\n\nThe dealer completes the cut and deals the cards clockwise one at a time, face down, beginning with the player to the left. If two or three people are playing, each player receives seven cards. If four or five people are playing, each receives five cards. The remainder of the pack is placed face down on the table to form the stock.\n\n### The Play\n\nThe player to the left of the dealer looks directly at any opponent and says, for example, \"Give me your kings,\" usually addressing the opponent by name and specifying the rank that they want, from ace down to two. The player who is \"fishing \u201cmust have at least one card of the rank that was asked for in their hand. The player who is addressed must hand over all the cards requested. If the player has none, they say, \"Go fish!\" and the player who made the request draws the top card of the stock and places it in their hand.\n\nIf a player gets one or more cards of the named rank that was asked for, they are entitled to ask the same or another player for a card. The player can ask for the same card or a different one. So long as the player succeeds in getting cards (makes a catch), their turn continues. When a player makes a catch, they must reveal the card so that the catch is verified. If a player gets the fourth card of a book, the player shows all four cards, places them on the table face up in front of everyone, and plays again.\n\nIf the player goes fishing without \"making a catch\" (does not receive a card he asked for), the turn passes to the left.\n\nThe game ends when all thirteen books have been won. The winner is the player with the most books. During the game, if a player is left without cards, they may (when it's their turn to play), draw from the stock and then ask for cards of that rank. If there are no cards left in the stock, they are out of the game.",
    "input_description": "Example: \n{\"common\": {\"num_players\": 4, \"current_player\": 0, \"winner\": null, \"is_over\": false, \"books\": [0, 0, 0, 0], \"facedown_cards\": {\"stock_size\": 28}}, \"players\": [{\"public\": {\"current_player\": true}, \"facedown_cards\": {\"hand\": [{\"rank\": \"Q\"}, {\"rank\": \"Q\"}, {\"rank\": \"8\"}, {\"rank\": \"Q\"}]}, \"faceup_cards\": {\"books\": []}}, {\"public\": {}, \"facedown_cards\": {\"hand_size\": 7}, \"faceup_cards\": {\"books\": []}}, {\"public\": {}, \"facedown_cards\": {\"hand_size\": 7}, \"faceup_cards\": {\"books\": []}}, {\"public\": {}, \"facedown_cards\": {\"hand_size\": 6}, \"faceup_cards\": {\"books\": []}}], \"recent_history\": [{\"type\": \"action\", \"player_id\": 0, \"action\": {\"action\": \"request\", \"args\": {\"target_player\": 3, \"rank\": \"Q\"}}, \"msg\": \"Player 0 decides to: request-(target_player: 3, rank: Q)\"}, {\"type\": \"info\", \"msg\": \"Player 0 takes an action: {'action': 'request', 'args': {'target_player': 3, 'rank': 'Q'}}\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 0 requests rank Q from Player 3.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 3 says 'Go Fish!'.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 0 draws 3 from stock.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 1.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 0, \"msg\": \"---------- End of Player 0's turn ----------\"}, {\"type\": \"action\", \"player_id\": 1, \"action\": {\"action\": \"request\", \"args\": {\"target_player\": 0, \"rank\": \"3\"}, \"id\": 2}, \"msg\": \"Player 1 decides to: request-(target_player: 0, rank: 3)\"}, {\"type\": \"info\", \"msg\": \"Player 1 takes an action: {'action': 'request', 'args': {'target_player': 0, 'rank': '3'}, 'id': 2}\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 1 requests rank 3 from Player 0.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 0 gives 1 card(s) to Player 1.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 1, \"msg\": \"---------- End of Player 1's turn ----------\"}, {\"type\": \"action\", \"player_id\": 1, \"action\": {\"action\": \"request\", \"args\": {\"target_player\": 0, \"rank\": \"9\"}, \"id\": 3}, \"msg\": \"Player 1 decides to: request-(target_player: 0, rank: 9)\"}, {\"type\": \"info\", \"msg\": \"Player 1 takes an action: {'action': 'request', 'args': {'target_player': 0, 'rank': '9'}, 'id': 3}\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 1 requests rank 9 from Player 0.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 0 says 'Go Fish!'.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 1 draws 4 from stock.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 2.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 1, \"msg\": \"---------- End of Player 1's turn ----------\"}, {\"type\": \"action\", \"player_id\": 2, \"action\": {\"action\": \"request\", \"args\": {\"target_player\": 0, \"rank\": \"K\"}, \"id\": 0}, \"msg\": \"Player 2 decides to: request-(target_player: 0, rank: K)\"}, {\"type\": \"info\", \"msg\": \"Player 2 takes an action: {'action': 'request', 'args': {'target_player': 0, 'rank': 'K'}, 'id': 0}\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 2 requests rank K from Player 0.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 0 gives 1 card(s) to Player 2.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 2, \"msg\": \"---------- End of Player 2's turn ----------\"}, {\"type\": \"action\", \"player_id\": 2, \"action\": {\"action\": \"request\", \"args\": {\"target_player\": 0, \"rank\": \"7\"}, \"id\": 2}, \"msg\": \"Player 2 decides to: request-(target_player: 0, rank: 7)\"}, {\"type\": \"info\", \"msg\": \"Player 2 takes an action: {'action': 'request', 'args': {'target_player': 0, 'rank': '7'}, 'id': 2}\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 2 requests rank 7 from Player 0.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 0 says 'Go Fish!'.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 2 draws 6 from stock.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 3.\", \"role\": null}, {\"type\": \"turn_end\", \"player_id\": 2, \"msg\": \"---------- End of Player 2's turn ----------\"}, {\"type\": \"action\", \"player_id\": 3, \"action\": {\"action\": \"request\", \"args\": {\"target_player\": 1, \"rank\": \"5\"}, \"id\": 9}, \"msg\": \"Player 3 decides to: request-(target_player: 1, rank: 5)\"}, {\"type\": \"info\", \"msg\": \"Player 3 takes an action: {'action': 'request', 'args': {'target_player': 1, 'rank': '5'}, 'id': 9}\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 3 requests rank 5 from Player 1.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 1 says 'Go Fish!'.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Player 3 draws 8 from stock.\", \"role\": null}, {\"type\": \"info\", \"msg\": \"Next player is Player 0.\", \"role\": null}], \"legal_actions\": [{\"action\": \"request\", \"args\": {\"target_player\": 1, \"rank\": \"Q\"}, \"id\": 0}, {\"action\": \"request\", \"args\": {\"target_player\": 1, \"rank\": \"8\"}, \"id\": 1}, {\"action\": \"request\", \"args\": {\"target_player\": 2, \"rank\": \"Q\"}, \"id\": 2}, {\"action\": \"request\", \"args\": {\"target_player\": 2, \"rank\": \"8\"}, \"id\": 3}, {\"action\": \"request\", \"args\": {\"target_player\": 3, \"rank\": \"Q\"}, \"id\": 4}, {\"action\": \"request\", \"args\": {\"target_player\": 3, \"rank\": \"8\"}, \"id\": 5}, {\"action\": \"draw\", \"id\": 6}]}\n\nExplanation: \n{\"common\": \"A dictionary containing common information about the game shared among all players.\", \"common.num_players\": \"The total number of players in the game.\", \"common.current_player\": \"The index of the player whose turn it is currently.\", \"common.winner\": \"The index of the winning player or null if the game is not over yet.\", \"common.is_over\": \"A boolean indicating if the game is over.\", \"common.books\": \"A list where each element represents the number of books completed by each player.\", \"common.facedown_cards.stock_size\": \"The number of cards remaining in the stock pile.\", \"players\": \"A list of dictionaries containing information about each player.\", \"players[i].public.current_player\": \"A boolean indicating whether the player 'i' is the current player.\", \"players[i].facedown_cards.hand\": \"The list of cards currently held by the player 'i', visible only to the player.\", \"players[i].facedown_cards.hand_size\": \"The number of cards in player's 'i' hand, visible to other players but without specific card details.\", \"players[i].faceup_cards.books\": \"A list of completed books by the player 'i', visible to all players.\", \"recent_history\": \"A list of actions, information and turn end logs for tracking the history of recent events and moves in the game.\", \"recent_history[i].type\": \"The type of entry in the recent history: 'action', 'info', or 'turn_end'.\", \"recent_history[i].player_id\": \"The ID of the player associated with the recent history entry, applicable for actions or turn end.\", \"recent_history[i].action\": \"A dictionary detailing the action taken by a player, if the entry type is 'action'.\", \"recent_history[i].msg\": \"A text message providing details about the history entry.\", \"recent_history[i].role\": \"The role or source of the information in the history entry, typically null.\", \"legal_actions\": \"A list of legal actions that the current player can take, including action type and arguments.\", \"legal_actions[i].action\": \"The type of action that can be taken, such as 'request' or 'draw'.\", \"legal_actions[i].args\": \"Additional arguments required for taking the action, if applicable.\", \"legal_actions[i].id\": \"A unique identifier for the action within the legal actions list.\"}",
    "policy_list": [
        "**Book Completion Focus**\nAssemble complete books as a priority. Redirect your strategy whenever you acquire three cards of a rank to focus heavily on obtaining the fourth card."
    ],
    "code": [
        "\ndef score(state: dict, action: str) -> float:\n    # Extract common game state details\n    common_state = state['common']\n    current_player_index = common_state['current_player']\n    num_books_completed = common_state['books'][current_player_index]\n    stock_size = common_state['facedown_cards']['stock_size']\n\n    # Extract player-specific state details\n    player_state = state['players'][current_player_index]\n    hand = player_state['facedown_cards']['hand']\n    hand_size = len(hand)\n    \n    # Extract action details\n    action_type = action['action']\n    action_args = action.get('args', {})\n    target_rank = action_args.get('rank', '')\n\n    # Basic evaluation metrics\n    has_three_of_a_kind = False\n    card_counts = {}\n\n    # Count occurrences of each rank in player's hand\n    for card in hand:\n        rank = card['rank']\n        card_counts[rank] = card_counts.get(rank, 0) + 1\n        if card_counts[rank] == 3:\n            has_three_of_a_kind = True\n\n    # Calculate base scores\n    base_score = 0.5 if has_three_of_a_kind else 0.1\n    book_bonus = num_books_completed * 0.05\n    stock_penalty = (52 - stock_size) / 52 * 0.1\n\n    # Adjust score based on action strategy\n    if action_type == 'request':\n        request_bonus = 0\n        if card_counts.get(target_rank, 0) >= 3:\n            request_bonus = 0.3\n        elif card_counts.get(target_rank, 0) > 1:\n            request_bonus = 0.15\n    elif action_type == 'draw':\n        request_bonus = -0.1\n\n    # Calculate and normalize the final score\n    result_score = base_score + book_bonus + request_bonus - stock_penalty\n    result_score = min(max(result_score, 0), 1)\n\n    return result_score\n"
    ]
}